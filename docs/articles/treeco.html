<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to treeco • treeco</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to treeco">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-106175087-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-106175087-2');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">treeco</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/treeco.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/mapping-with-treeco.html">Mapping with treeco</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/tyluRp/treeco">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Introduction to treeco</h1>
                        <h4 class="author">Tyler Littlefield</h4>
            
            <h4 class="date">2018-10-19</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/tyluRp/treeco/blob/master/vignettes/treeco.Rmd"><code>vignettes/treeco.Rmd</code></a></small>
      <div class="hidden name"><code>treeco.Rmd</code></div>

    </div>

    
    
<p>The goal of treeco is to make it easy for R users to extract ecosystem and economic benefits of trees. Similar tools like i-Tree, Davey Tree Calculator, and OpenTreeMap are also available and I would encourage you to check them out. These tools heavily influenced treeco.</p>
<p>Note that this package is currently labeled as <a href="https://www.tidyverse.org/lifecycle/#experimental"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="lifecycle"></a>. Users should expect breaking changes. One example being that <code>eco_run_all</code> requires both the common name and botanical name fields where it once only required the former field. I’m doing my best to only make these changes when it makes sense and improves treeco significantly. My goal is to eventually change that label to stable. If that hasn’t scared you away, please keeping reading on!</p>
<div id="getting-started" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-started" class="anchor"></a>Getting started</h2>
<p>I’m going to use the <a href="https://stat.ethz.ch/R-manual/R-patched/library/datasets/html/trees.html">trees</a> dataset provided in base R:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">str</span>(trees)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="co">#&gt; 'data.frame':    31 obs. of  3 variables:</span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="co">#&gt;  $ Girth : num  8.3 8.6 8.8 10.5 10.7 10.8 11 11 11.1 11.2 ...</span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co">#&gt;  $ Height: num  70 65 63 72 81 83 66 75 80 75 ...</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="co">#&gt;  $ Volume: num  10.3 10.3 10.2 16.4 18.8 19.7 15.6 18.2 22.6 19.9 ...</span></a></code></pre></div>
<p>We have 3 variables and 31 observations. The first thing to look at is the variables. We have:</p>
<ol style="list-style-type: decimal">
<li>Girth: This is the trees diameter in inches, often referred to as <a href="https://en.wikipedia.org/wiki/Diameter_at_breast_height">Diameter at breast height</a> or DBH for short.</li>
<li>Height: The height of the tree in feet.</li>
<li>Volume: The volume of timber in cubic feet.</li>
</ol>
<p>We are missing three important and required bits of information:</p>
<ol style="list-style-type: decimal">
<li>Common name: The common name given to the tree.</li>
<li>Botanical name: The botanical or scientific name given to the tree.</li>
<li>Region: The region these trees belong to.</li>
</ol>
<p>Those three fields along with DBH are required to extract eco benefits. Below is an explanation of why:</p>
<ol style="list-style-type: decimal">
<li>DBH: This value is part of the interpolation equation used to interpolate benefits.</li>
<li>Common name: The benefits of a tree differ depending on the species.</li>
<li>Botanical name: Same reasoning as mentioned in common name but there is an additional layer. The reason treeco requires both of these fields is to maximize the number of records treeco can match. More on this later.</li>
<li>Region: The benefits of an identical tree in two different regions will often differ. For example, a palm tree in California might not be as valuable as a palm tree on the east coast.</li>
</ol>
</div>
<div id="guessing-a-missing-name-field" class="section level2">
<h2 class="hasAnchor">
<a href="#guessing-a-missing-name-field" class="anchor"></a>Guessing a missing name field</h2>
<p>Given the data we have, we can’t extract the benefits, we’re missing too many fields. Fortunately, there is some info we can use in the docs, type <code>?trees</code> in the R console to take a look. We see that these are Black Cherry trees. After some googling, I find that these trees were collected in the Allegheny National Forest in Pennsylvania. I’m going to add the common name as a field <em>common</em> and add a row number field <em>rn</em>. More on why <em>rn</em> is added later.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw">library</span>(tibble)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"></a>
<a class="sourceLine" id="cb2-4" data-line-number="4">trees &lt;-<span class="st"> </span>trees <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">common =</span> <span class="st">"black cherry tree"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/tibble/topics/rownames">rownames_to_column</a></span>(<span class="st">"rn"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/reexports.html">as_tibble</a></span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="st">  </span><span class="kw">print</span>()</a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="co">#&gt; # A tibble: 31 x 5</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="co">#&gt;    rn    Girth Height Volume common           </span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="co">#&gt;    &lt;chr&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;            </span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12"><span class="co">#&gt;  1 1       8.3     70   10.3 black cherry tree</span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13"><span class="co">#&gt;  2 2       8.6     65   10.3 black cherry tree</span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="co">#&gt;  3 3       8.8     63   10.2 black cherry tree</span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="co">#&gt;  4 4      10.5     72   16.4 black cherry tree</span></a>
<a class="sourceLine" id="cb2-16" data-line-number="16"><span class="co">#&gt;  5 5      10.7     81   18.8 black cherry tree</span></a>
<a class="sourceLine" id="cb2-17" data-line-number="17"><span class="co">#&gt;  6 6      10.8     83   19.7 black cherry tree</span></a>
<a class="sourceLine" id="cb2-18" data-line-number="18"><span class="co">#&gt;  7 7      11       66   15.6 black cherry tree</span></a>
<a class="sourceLine" id="cb2-19" data-line-number="19"><span class="co">#&gt;  8 8      11       75   18.2 black cherry tree</span></a>
<a class="sourceLine" id="cb2-20" data-line-number="20"><span class="co">#&gt;  9 9      11.1     80   22.6 black cherry tree</span></a>
<a class="sourceLine" id="cb2-21" data-line-number="21"><span class="co">#&gt; 10 10     11.2     75   19.9 black cherry tree</span></a>
<a class="sourceLine" id="cb2-22" data-line-number="22"><span class="co">#&gt; # ... with 21 more rows</span></a></code></pre></div>
<p>Now all that’s left is to identify the botanical name for a Black Cherry tree. This is required because all benefits rely on a 3,000+ <em>master species list</em> created by <a href="https://www.itreetools.org/">i-Tree</a>.</p>
<p>Since R is very strict, the value “black common tree” will not match i-Tree’s “Black cherry tree” because of the capital “B”. Even worse, i-Tree might call it “Black cherry” and omit the word “tree” which makes the link between the two that much more difficult to identify. The best treeco can do is quantify the similarity between the users data and that master species list and then link the most similar record found in i-Tree. It first does this for the common name field and then the botanical and this is why both fields are required, to maximize the number of matches. This is where <code>eco_guess</code> plays a role, for example:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">library</span>(treeco)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"></a>
<a class="sourceLine" id="cb3-3" data-line-number="3">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"common fig"</span>, <span class="st">"Commn FIG"</span>, <span class="st">"RED MAPLE"</span>)</a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="kw"><a href="../reference/eco_guess.html">eco_guess</a></span>(x, <span class="st">"botanical"</span>)</a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">#&gt; [1] "Ficus carica" "Ficus carica" "Acer rubrum"</span></a></code></pre></div>
<p>And for the trees dataset, I can do something like:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">trees &lt;-<span class="st"> </span>trees <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">botanical =</span> <span class="kw"><a href="../reference/eco_guess.html">eco_guess</a></span>(common, <span class="st">"botanical"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="st">  </span><span class="kw">print</span>()</a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co">#&gt; # A tibble: 31 x 6</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="co">#&gt;    rn    Girth Height Volume common            botanical      </span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="co">#&gt;    &lt;chr&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;             &lt;chr&gt;          </span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="co">#&gt;  1 1       8.3     70   10.3 black cherry tree Prunus serotina</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="co">#&gt;  2 2       8.6     65   10.3 black cherry tree Prunus serotina</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="co">#&gt;  3 3       8.8     63   10.2 black cherry tree Prunus serotina</span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="co">#&gt;  4 4      10.5     72   16.4 black cherry tree Prunus serotina</span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="co">#&gt;  5 5      10.7     81   18.8 black cherry tree Prunus serotina</span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="co">#&gt;  6 6      10.8     83   19.7 black cherry tree Prunus serotina</span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13"><span class="co">#&gt;  7 7      11       66   15.6 black cherry tree Prunus serotina</span></a>
<a class="sourceLine" id="cb4-14" data-line-number="14"><span class="co">#&gt;  8 8      11       75   18.2 black cherry tree Prunus serotina</span></a>
<a class="sourceLine" id="cb4-15" data-line-number="15"><span class="co">#&gt;  9 9      11.1     80   22.6 black cherry tree Prunus serotina</span></a>
<a class="sourceLine" id="cb4-16" data-line-number="16"><span class="co">#&gt; 10 10     11.2     75   19.9 black cherry tree Prunus serotina</span></a>
<a class="sourceLine" id="cb4-17" data-line-number="17"><span class="co">#&gt; # ... with 21 more rows</span></a></code></pre></div>
<p>Finally, we need to identify the region code for Pennsylvania. I don’t have a great way of doing this. Adding a function for identifying the region code via zipcode, state, city, etc. is on my list. For now, you can use Davey Tree’s <a href="http://www.treebenefits.com/calculator/">tree benefit calculator</a> to figure out the region and then take a look at the money dataset for the code:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">money <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/reexports.html">as_tibble</a></span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(region_name <span class="op">==</span><span class="st"> "Northeast"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/select.html">select</a></span>(region_code)</a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="co">#&gt; # A tibble: 1 x 1</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="co">#&gt;   region_code</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="co">#&gt;   &lt;chr&gt;      </span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="co">#&gt; 1 NoEastXXX</span></a></code></pre></div>
</div>
<div id="calculating-the-benefits" class="section level2">
<h2 class="hasAnchor">
<a href="#calculating-the-benefits" class="anchor"></a>Calculating the benefits</h2>
<p>Before we calculate the benefits, it should be noted that most of the steps above won’t be necessary, they’re only there to construct and describe a dataframe that <code>eco_run_all</code> needs. In most cases, the typical workflow will be:</p>
<ol style="list-style-type: decimal">
<li>Import the data</li>
<li>Guess the common/botanical field if either is missing</li>
<li>Calculate the benefits</li>
</ol>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">my_trees &lt;-<span class="st"> </span><span class="kw"><a href="../reference/eco_run_all.html">eco_run_all</a></span>(</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">  <span class="dt">data =</span> trees, </a>
<a class="sourceLine" id="cb6-3" data-line-number="3">  <span class="dt">common_col =</span> <span class="st">"common"</span>, </a>
<a class="sourceLine" id="cb6-4" data-line-number="4">  <span class="dt">botanical_col =</span> <span class="st">"botanical"</span>, </a>
<a class="sourceLine" id="cb6-5" data-line-number="5">  <span class="dt">dbh_col =</span> <span class="st">"Girth"</span>, </a>
<a class="sourceLine" id="cb6-6" data-line-number="6">  <span class="dt">region =</span> <span class="st">"NoEastXXX"</span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7">  ) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/reexports.html">as_tibble</a></span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9"><span class="st">  </span><span class="kw">print</span>()</a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="co">#&gt; Gathering species matches...</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11"><span class="co">#&gt; Gathering interpolation parameters...</span></a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="co">#&gt; Interpolating benefits...</span></a>
<a class="sourceLine" id="cb6-13" data-line-number="13"><span class="co">#&gt; # A tibble: 465 x 9</span></a>
<a class="sourceLine" id="cb6-14" data-line-number="14"><span class="co">#&gt;       id botanical  common   dbh benefit_value benefit unit  dollars rn   </span></a>
<a class="sourceLine" id="cb6-15" data-line-number="15"><span class="co">#&gt;    &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;  &lt;dbl&gt;         &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb6-16" data-line-number="16"><span class="co">#&gt;  1     1 Prunus se… Black…   8.3        0.277  aq nox… lb       1.27 1    </span></a>
<a class="sourceLine" id="cb6-17" data-line-number="17"><span class="co">#&gt;  2     1 Prunus se… Black…   8.3        0.067  aq nox… lb       0.31 1    </span></a>
<a class="sourceLine" id="cb6-18" data-line-number="18"><span class="co">#&gt;  3     1 Prunus se… Black…   8.3        0.154  aq ozo… lb       0.71 1    </span></a>
<a class="sourceLine" id="cb6-19" data-line-number="19"><span class="co">#&gt;  4     1 Prunus se… Black…   8.3        0.0183 aq pm1… lb       0.15 1    </span></a>
<a class="sourceLine" id="cb6-20" data-line-number="20"><span class="co">#&gt;  5     1 Prunus se… Black…   8.3        0.075  aq pm1… lb       0.62 1    </span></a>
<a class="sourceLine" id="cb6-21" data-line-number="21"><span class="co">#&gt;  6     1 Prunus se… Black…   8.3        0.123  aq sox… lb       0.43 1    </span></a>
<a class="sourceLine" id="cb6-22" data-line-number="22"><span class="co">#&gt;  7     1 Prunus se… Black…   8.3        0.0262 aq sox… lb       0.09 1    </span></a>
<a class="sourceLine" id="cb6-23" data-line-number="23"><span class="co">#&gt;  8     1 Prunus se… Black…   8.3        0.0112 aq voc… lb       0.03 1    </span></a>
<a class="sourceLine" id="cb6-24" data-line-number="24"><span class="co">#&gt;  9     1 Prunus se… Black…   8.3        0      bvoc    lb       0    1    </span></a>
<a class="sourceLine" id="cb6-25" data-line-number="25"><span class="co">#&gt; 10     1 Prunus se… Black…   8.3       84.4    co2 av… lb       0.28 1    </span></a>
<a class="sourceLine" id="cb6-26" data-line-number="26"><span class="co">#&gt; # ... with 455 more rows</span></a></code></pre></div>
<p>Notice that the <em>height</em> and <em>volume</em> fields are missing. This is because <code>eco_run_all</code> strips the input data of everything except what it needs: the row number, common name, botanical name, and dbh field. It does this in an effort to keep the data small. Not too long ago, <code>eco_run_all</code> took 2 and half minutes to calculate the benefits for 400,000 trees. It now takes a couple seconds depending on how unique the data is. The removal of unneeded data is why I add a field <em>rn</em> at the beginning, to preserve the row number and link it to the benefits dataset <code>my_trees</code>:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">trees <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/select.html">select</a></span>(rn, Height, Volume) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/join.html">right_join</a></span>(my_trees) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/reexports.html">glimpse</a></span>()</a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co">#&gt; Joining, by = "rn"</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co">#&gt; Observations: 465</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="co">#&gt; Variables: 11</span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="co">#&gt; $ rn            &lt;chr&gt; "1", "1", "1", "1", "1", "1", "1", "1", "1", "1"...</span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="co">#&gt; $ Height        &lt;dbl&gt; 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, ...</span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10"><span class="co">#&gt; $ Volume        &lt;dbl&gt; 10.3, 10.3, 10.3, 10.3, 10.3, 10.3, 10.3, 10.3, ...</span></a>
<a class="sourceLine" id="cb7-11" data-line-number="11"><span class="co">#&gt; $ id            &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, ...</span></a>
<a class="sourceLine" id="cb7-12" data-line-number="12"><span class="co">#&gt; $ botanical     &lt;chr&gt; "Prunus serotina", "Prunus serotina", "Prunus se...</span></a>
<a class="sourceLine" id="cb7-13" data-line-number="13"><span class="co">#&gt; $ common        &lt;chr&gt; "Black cherry", "Black cherry", "Black cherry", ...</span></a>
<a class="sourceLine" id="cb7-14" data-line-number="14"><span class="co">#&gt; $ dbh           &lt;dbl&gt; 8.3, 8.3, 8.3, 8.3, 8.3, 8.3, 8.3, 8.3, 8.3, 8.3...</span></a>
<a class="sourceLine" id="cb7-15" data-line-number="15"><span class="co">#&gt; $ benefit_value &lt;dbl&gt; 0.2773, 0.0670, 0.1541, 0.0183, 0.0750, 0.1232, ...</span></a>
<a class="sourceLine" id="cb7-16" data-line-number="16"><span class="co">#&gt; $ benefit       &lt;chr&gt; "aq nox avoided", "aq nox dep", "aq ozone dep", ...</span></a>
<a class="sourceLine" id="cb7-17" data-line-number="17"><span class="co">#&gt; $ unit          &lt;chr&gt; "lb", "lb", "lb", "lb", "lb", "lb", "lb", "lb", ...</span></a>
<a class="sourceLine" id="cb7-18" data-line-number="18"><span class="co">#&gt; $ dollars       &lt;dbl&gt; 1.27, 0.31, 0.71, 0.15, 0.62, 0.43, 0.09, 0.03, ...</span></a></code></pre></div>
<p>This is especially useful given that most tree data is spatial and includes coordinates. Whether or not the approach (stripping data, then joining at the end) is a good idea is certainly up for debate and is another reminder of why this package is experimental.</p>
</div>
<div id="future-plans" class="section level2">
<h2 class="hasAnchor">
<a href="#future-plans" class="anchor"></a>Future plans</h2>
<p>I have a couple ideas for the future of treeco:</p>
<ol style="list-style-type: decimal">
<li>Add reporting features similar to i-Tree by utilizing Rmarkdown.</li>
<li>A more verbose <code>eco_run_all</code> to tell the user how many records were matched.</li>
<li>Utilize the <code>sf</code> package for mapping and other applications like guessing the users region.</li>
<li>Add additional benefits. I’m leaning towards adding an arugment <code>expanded</code> to include additional benefits.</li>
<li>Warn the user if the benefits will take more time than expected to calculate the benefits.</li>
</ol>
<p>Any criticism, issues, enhancements are encouraged and can be filed <a href="https://github.com/tyluRp/treeco/issues">here</a>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#getting-started">Getting started</a></li>
      <li><a href="#guessing-a-missing-name-field">Guessing a missing name field</a></li>
      <li><a href="#calculating-the-benefits">Calculating the benefits</a></li>
      <li><a href="#future-plans">Future plans</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Tyler Littlefield.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
